{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// 41881977-c3e0a259ee9c86064d37a09ba\nimport axios from \"axios\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst addMoreButton = document.querySelector('.add-more-button');\nconst input = document.querySelector('.input-text');\nconst gallery = document.querySelector('.gallery');\nconst load = document.querySelector('.load'); load.style.display = 'none';\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet totalHits;\nlet per_page = 40;\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n  loadGallery();\n  addMoreButton.addEventListener('click', loadMore);\n  addMoreButton.style.display = 'block';\n})\n\n\nasync function loadMore() {\n  page += 1;\n  await loadGallery();\n}\n\nfunction updateButtonVisibility() {\n  const totalPages = Math.ceil(totalHits / per_page);\n  if (page >= totalPages) {\n    addMoreButton.style.display = 'none';\n    iziToast.show({\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    })\n  }\n}\n\nasync function loadGallery() {\n  const searchedWord = input.value;\n  const searchParams = new URLSearchParams({\n    key: '41881977-c3e0a259ee9c86064d37a09ba',\n    q: searchedWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  })\n  load.style.display = 'block';\n  try {\n    await axios.get(`https://pixabay.com/api/?${searchParams}&per_page=${per_page}&page=${page}`)\n      .then((response) => {\n        load.style.display = 'none';\n        totalHits = response.data.totalHits;\n        if (totalHits > 0) {              \n          const imagesList = response.data.hits.reduce((html, image) => {\n            return html + imageCard(image);\n          }, '');        \n          gallery.innerHTML += imagesList;\n          modal.refresh();\n          const card = document.querySelector('.card');\n          const cardHeight = card.getBoundingClientRect().height;\n          window.scrollBy({\n            top: 2 * cardHeight,\n            behavior: 'smooth'\n          });\n        } else {\n        addMoreButton.style.display = 'none';  \n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FAFAFB',\n          backgroundColor: '#EF4040',\n          position: 'topRight'\n      });\n        return;\n      }\n      updateButtonVisibility();\n    })\n    .catch ((error) => {\n      console.log(error)\n    })\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction imageCard(images) {\n  return `<li class=\"card\">\n    <a href=\"${images.largeImageURL}\">\n      <img src=\"${images.webformatURL}\" alt=\"${images.tags}\">\n    </a>\n    <div class=\"info\">\n      <div class=\"crit-info\">\n        <span>Likes</span>\n        <span class=\"crit-value\">${images.likes}</span>\n      </div>\n      <div class=\"crit-info\">\n        <span>Views</span>\n        <span class=\"crit-value\">${images.views}</span>\n      </div>\n      <div class=\"crit-info\">\n        <span>Comments</span>\n        <span class=\"crit-value\">${images.comments}</span>\n      </div>\n      <div class=\"crit-info\">\n        <span>Downloads</span>\n        <span class=\"crit-value\">${images.downloads}</span>\n      </div>\n    </div>\n  </li>`;\n}"],"names":["form","addMoreButton","input","gallery","load","modal","SimpleLightbox","page","totalHits","per_page","event","loadGallery","loadMore","updateButtonVisibility","totalPages","iziToast","searchedWord","searchParams","axios","response","imagesList","html","image","imageCard","cardHeight","error","images"],"mappings":"owBAUA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAgB,SAAS,cAAc,kBAAkB,EACzDC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EAAGA,EAAK,MAAM,QAAU,OACnE,MAAMC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAO,EACPC,EACAC,EAAW,GAEfT,EAAK,iBAAiB,SAAU,MAAOU,GAAU,CAC/CA,EAAM,eAAc,EACpBH,EAAO,EACPJ,EAAQ,UAAY,GACpBQ,IACAV,EAAc,iBAAiB,QAASW,CAAQ,EAChDX,EAAc,MAAM,QAAU,OAChC,CAAC,EAGD,eAAeW,GAAW,CACxBL,GAAQ,EACR,MAAMI,EAAW,CACnB,CAEA,SAASE,GAAyB,CAChC,MAAMC,EAAa,KAAK,KAAKN,EAAYC,CAAQ,EAC7CF,GAAQO,IACVb,EAAc,MAAM,QAAU,OAC9Bc,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAChB,CAAK,EAEL,CAEA,eAAeJ,GAAc,CAC3B,MAAMK,EAAed,EAAM,MACrBe,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACDZ,EAAK,MAAM,QAAU,QACrB,GAAI,CACF,MAAMc,EAAM,IAAI,4BAA4BD,cAAyBR,UAAiBF,GAAM,EACzF,KAAMY,GAAa,CAGlB,GAFAf,EAAK,MAAM,QAAU,OACrBI,EAAYW,EAAS,KAAK,UACtBX,EAAY,EAAG,CACjB,MAAMY,EAAaD,EAAS,KAAK,KAAK,OAAO,CAACE,EAAMC,IAC3CD,EAAOE,EAAUD,CAAK,EAC5B,EAAE,EACLnB,EAAQ,WAAaiB,EACrBf,EAAM,QAAO,EAEb,MAAMmB,EADO,SAAS,cAAc,OAAO,EACnB,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAK,EAAIA,EACT,SAAU,QACtB,CAAW,CACX,KAAe,CACPvB,EAAc,MAAM,QAAU,OAC9Bc,EAAS,MAAM,CACb,QAAS,2EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UACpB,CAAO,EACC,MACD,CACDF,GACN,CAAK,EACA,MAAQY,GAAU,CACjB,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACF,OAAQA,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,SAASF,EAAUG,EAAQ,CACzB,MAAO;AAAA,eACMA,EAAO;AAAA,kBACJA,EAAO,sBAAsBA,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKnBA,EAAO;AAAA;AAAA;AAAA;AAAA,mCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,mCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,mCAIPA,EAAO;AAAA;AAAA;AAAA,QAI1C"}